<?php
/*
LiveImport (c) MaxD, 2016. Write to liveimport@devs.mx for support and purchase.
*/
 goto c10e; b36b: function find_manufacturer() { goto ddcc; ed6b: $model = $name; Baea: return $manufacturer; goto D8b8; E27a: $d16 = strtolower($name); foreach ($E21 as $ff8) { $mask = @strtolower($ff8["\x6e\141\x6d\145"]); if (!(strlen($mask) < 2)) { goto Cc6c; } goto C98f; Cc6c: if (!(($Bf = strpos($d16, $mask)) !== false)) { goto f888; } if (ctype_alpha(@$name[$Bf + strlen($mask)])) { goto E411; } $C0[$Bf] = $ff8["\156\x61\155\145"]; E411: f888: C98f: } e9d0: if ($C0) { goto Fe8b; } return false; goto faff; ddcc: global $name, $model, $E21, $manufacturer; if ($E21) { goto D41d; } $E21 = GetManufacturers(); D41d: $C0 = array(); goto E27a; faff: Fe8b: $Bf = min(array_keys($C0)); $manufacturer = $C0[$Bf]; $model = trim(substr($name, $Bf + strlen($manufacturer))); if (!($model == '')) { goto Baea; } goto ed6b; D8b8: } function E4a($Ec) { switch ($Ec) { case "\154\x69\163\164": process_list(); goto Ed21; case "\x70\x72\157\144\165\x63\164": process_product(); goto Ed21; default: xlog("\127\x41\122\x4e\111\116\x47\41\x20\125\x6e\153\156\157\x77\156\40\145\x6e\164\x69\x74\171\40\164\x79\160\145\72\40" . $Ec); } C646: Ed21: } function F8($A38, $a74 = 0) { $x = currency($A38) + $a74; if ($x) { goto ffad; } return false; ffad: global $ins; eval($ins["\160\162\151\143\x65"]); return round($x, 2); } function B0D($ins_id) { goto e3f2; B20a: if (!$ins["\143\x61\x74\x65\147\x6f\x72\x69\145\163"]) { goto E115; } $ins["\143\x61\164\x65\x67\x6f\162\x69\145\x73"] = explode("\x2c", $ins["\x63\x61\x74\x65\147\x6f\x72\x69\x65\163"]); E115: global $a2; if (!($a2 & $ins["\x63\x61\x74\145\x67\x6f\162\151\x65\x73"])) { goto Af81; } goto c1ef; c1ef: foreach ($ins["\x63\x61\x74\x65\x67\157\x72\x69\x65\x73"] as $af => &$b0) { if (!empty($a2[$b0])) { goto A7dc; } unset($ins["\143\x61\x74\145\147\157\162\151\145\x73"][$af]); goto Eadc; A7dc: $b0 = str_replace("\x26\147\164\73", "\x3e", $a2[$b0]["\146\165\154\154\x6e\141\155\x65"]); Eadc: B97f: } Eaa8: Af81: if (trim($ins["\x70\162\x69\x63\x65"])) { goto Edcf; } $ins["\160\162\151\x63\145"] = "\44\170\40\75\x20\x24\170\x3b"; goto cf95; e3f2: global $ins; if (!(@$ins["\x69\156\163\x5f\151\x64"] == $ins_id)) { goto A3c8; } return; A3c8: $ins = query("\x53\105\114\105\103\x54\x20\x2a\x20\x46\x52\x4f\115\40\x70\x61\162\163\x65\x6d\x78\137\x69\156\163\40\127\110\105\122\x45\x20\151\156\163\x5f\x69\144\75{$ins_id}")->row; goto B20a; cf95: goto B967; Edcf: $ins["\160\x72\x69\x63\x65"] = "\x24\x78\40\75\x20" . str_replace("\x58", "\44\170", $ins["\x70\162\x69\x63\x65"]) . "\73"; B967: goto b389; b389: } function DC7() { goto A8c1; c16f: $update_new_price = true; $update_price = true; $update_quantity = true; $update_attributes = true; $update_options = true; goto C206; E5f1: $manufacturer = false; if (!$ins["\x6d\x61\156\165\146\x61\143\x74\165\x72\145\162"]) { goto Dcb1; } $manufacturer = $ins["\155\141\x6e\x75\146\x61\143\x74\165\162\145\162"]; static $E21; if (!(empty($E21[$manufacturer]) and function_exists("\x6d\x61\x6e\x75\x66\x61\x63\164\165\162\145\x72\x5f\156\x61\x6d\145"))) { goto e384; } goto f5d8; d438: $nextpage = array(); $subcategories = array(); $subcategories_images = array(); global $translate_engine; $translate_engine = "\171\141\156\x64\x65\170"; goto A788; C206: $categories = $ins["\143\x61\x74\145\147\157\x72\x69\x65\163"]; if ($categories) { goto d436; } $categories = array(); d436: global $manufacturer; goto E5f1; B2a9: if (empty($E21[$manufacturer])) { goto ab1e; } $manufacturer = $E21[$manufacturer]; ab1e: Dcb1: $products = array(); goto d438; A788: global $http_cache; $http_cache = true; global $product_id; $product_id = get_last_product_id() + 1; before_page_processing(); goto e785; A8c1: global $Ded; $Ded = false; $b04 = array("\156\145\x77\x5f\x70\x72\x69\143\145\x5f\x65\156\144", "\x75\x70\144\141\164\x65\x5f\144\x61\164\145\137\x61\166\141\151\154\141\142\154\145", "\167\x61\164\x65\x72\155\141\x72\153", "\155\x61\x73\153", "\164\x72\x69\155\137\x69\x6d\x61\147\x65", "\x6f\160\164\151\x6f\x6e\163\137\161\x75\x61\x6e\164\151\164\171", "\163\x6b\151\x70\x5f\172\145\162\x6f\137\x70\162\x69\143\145", "\165\x73\145\137\147\157\157\x67\x6c\145\x5f\164\x72\141\x6e\163\154\141\164\x65", "\146\151\x6c\x74\145\162", "\141\165\x74\157\137\x66\x69\x6c\x74\145\162", "\x75\x70\144\x61\x74\x65\137\146\151\154\164\145\x72", "\162\x65\160\154\141\x63\x65\x5f\x63\x61\164\x65\147\x6f\162\151\145\x73", "\x69\155\x61\x67\145\137\145\x78\164", "\x75\x70\144\141\164\145\x5f\167\x65\x69\x67\150\x74", "\165\x70\x64\x61\164\x65\x5f\x6d\x61\156\165\146\x61\x63\164\165\162\145\x72", "\x75\160\x64\141\164\x65\137\x6d\157\144\145\x6c", "\x75\x70\x64\141\x74\x65\x5f\163\153\165", "\x75\x70\144\x61\x74\x65\137\x73\145\x6f\x5f\165\x72\154", "\162\x65\154\x61\164\145\x64\137\157\160\164\x69\x6f\156\x73", "\x63\141\x74\145\x67\157\x72\x69\x7a\x65\162", "\x67\145\x74\x5f\160\141\x72\x65\x6e\164\x5f\143\141\164\145\x67\157\x72\x69\145\163\x5f\x70\x72\x6f\x64\x75\x63\x74\x73", "\163\x69\155\x70\x6c\145\x5f\143\141\x74\145\x67\157\x72\151\x65\163", "\156\x65\x77\x5f\160\x72\151\x63\x65", "\163\x6f\162\x74\137\157\160\164\151\x6f\156\x73", "\x6d\151\x6e\137\x69\155\141\147\x65\137\x70\170", "\x76\141\x6c\151\x64\x61\x74\145\x5f\x69\155\141\147\x65\x73", "\x63\154\x65\141\156\137\x6d\141\151\156\x5f\151\x6d\141\147\x65", "\143\x6c\x65\141\156\137\151\155\141\147\145\x73", "\x75\163\x65\137\171\141\x6e\144\145\170\137\164\162\x61\156\x73\154\x61\x74\145", "\x70\x72\x6f\144\x75\143\x74\137\162\x65\x77\141\x72\x64", "\162\x65\166\x69\145\167\x73", "\165\x70\144\x61\164\145\x5f\162\145\x76\151\x65\x77\163", "\x64\x6f\167\156\x6c\157\141\x64", "\x6e\x61\155\145", "\155\157\144\x65\154", "\143\141\164\145\147\157\x72\171", "\143\x61\x74\145\147\x6f\x72\x69\x65\163", "\163\x65\x6f\x5f\165\x72\x6c", "\x68\x31", "\164\151\x74\x6c\145", "\x6d\x65\x74\141\x5f\153\145\171\167\x6f\162\x64", "\155\145\164\141\x5f\144\145\x73\143\x72\151\160\164\x69\157\156", "\144\145\x73\x63\162\x69\160\x74\151\157\156", "\164\x61\x67\x73", "\162\145\x6c\x61\x74\145\144", "\163\153\165", "\165\x70\143", "\145\141\156", "\x6a\x61\x6e", "\155\x70\x6e", "\154\x6f\x63\x61\x74\151\157\156", "\160\162\151\143\x65", "\164\141\170\137\x63\154\141\x73\x73\137\x69\x64", "\161\165\x61\x6e\x74\151\x74\x79", "\155\151\x6e\151\155\x75\155", "\163\165\142\164\162\141\x63\x74", "\163\x74\x6f\x63\153\x5f\163\x74\141\x74\165\163\x5f\x69\x64", "\x73\150\x69\160\160\x69\x6e\x67", "\x6b\145\171\167\157\162\144", "\144\141\164\x65\137\x61\x76\141\151\x6c\141\142\154\x65", "\x6c\145\156\x67\x74\x68", "\x77\x69\144\164\x68", "\x68\x65\151\147\x68\164", "\154\x65\156\x67\x74\x68\137\143\x6c\x61\x73\x73\137\x69\144", "\167\x65\151\x67\150\x74", "\167\x65\x69\147\150\164\x5f\143\x6c\x61\163\163\x5f\151\144", "\163\164\x61\x74\165\163", "\x73\x6f\x72\164\137\157\162\x64\x65\x72", "\155\141\x6e\165\146\141\x63\x74\x75\x72\x65\162", "\160\x72\x6f\144\165\143\164\137\x73\x74\157\x72\145", "\x70\157\151\x6e\164\x73", "\x6d\x61\x69\x6e\x5f\151\155\x61\147\x65", "\x69\x6d\x61\x67\x65\163", "\141\164\x74\162\151\x62\x75\x74\x65\163", "\157\x70\x74\151\x6f\156\163", "\x70\x72\157\x64\165\143\x74", "\151\x64", "\157\154\x64\137\x69\144", "\x70\x72\157\x64\x75\143\164\163", "\156\x65\170\x74\160\141\147\145", "\x75\x70\x64\141\x74\x65\x5f\x72\x65\x6c\x61\164\x65\144", "\x75\160\x64\x61\164\145\x5f\151\155\x61\147\145\x73", "\165\x70\144\141\164\145\137\x63\141\164\145\x67\x6f\x72\151\145\163", "\165\x70\x64\x61\x74\145\x5f\144\x65\163\x63\x72\151\160\x74\151\157\x6e", "\x75\160\144\x61\x74\145\137\x73\x74\141\164\x75\163", "\165\160\x64\x61\x74\x65\137\163\164\157\143\x6b\137\163\x74\141\x74\165\x73", "\165\160\144\x61\164\x65\137\156\141\x6d\x65", "\160\x61\x72\x65\156\164\137\143\x61\x74\x65\147\157\162\x79", "\x63\x61\164\145\x67\157\162\x79\x5f\156\x61\155\145", "\x63\x61\164\145\x67\157\x72\x79\137\151\x6d\x61\147\x65", "\164\157\x70", "\x6d\x61\x6e\x75\x66\141\x63\164\x75\x72\x65\x72\x5f\x69\155\x61\x67\145", "\144\x65\x73\143\x72\x69\x70\x74\151\x6f\156\137\x69\x6d\141\147\x65\163", "\155\151\x6e\x5f\x69\155\141\x67\x65\x5f\163\x69\x7a\145", "\155\x61\170\137\151\x6d\141\147\x65\x5f\163\x69\172\145", "\x73\151\164\x65\x5f\154\x61\156\x67"); foreach ($b04 as $A5c) { unset($GLOBALS[$A5c]); bf27: } c987: goto d559; f5d8: $f9 = manufacturer_name($manufacturer); if (!$f9) { goto edf1; } $E21[$manufacturer] = $f9; edf1: e384: goto B2a9; Dd0a: if (!$a6["\x6d\151\163\x73\151\x6e\147"]) { goto A261; } $C38 = 90; A261: $description_files = array("\x6a\x70\x67", "\x70\x6e\x67", "\x67\151\x66", "\x74\x69\x66"); $image_filename = ''; goto c16f; d559: global $update_new_price, $top, $C38, $ins, $categories, $update_quantity, $update_price, $update_attributes, $update_options, $products, $nextpage, $subcategories, $subcategories_images, $image_filename, $description_files, $inherit_categories; $top = 1; $inherit_categories = true; $C38 = 50; global $a6; goto Dd0a; e785: } goto E77d; E77d: function alert($Ad, $d8 = false) { if ($d8) { goto da40; } $d8 = $Ad; da40: send_admin_message($Ad, $d8); xwarn("\101\x64\x6d\x69\x6e\40\141\x6c\x65\162\164\x20\163\x65\x6e\x74\72\40\74\x62\x3e{$Ad}\74\x2f\x62\76"); } function a69($Ec, $c2) { if ($Ec == "\160\162\x6f\x64\165\x63\x74") { goto Ba65; } die("\104\145\154\x65\x74\x65\x50\x6c\x61\x74\146\157\x72\x6d\x45\x6e\x74\151\x74\x79\x20\165\156\x6b\x6e\157\x77\156\x20\x65\156\164\x69\164\x79\x20\164\171\160\x65"); goto af85; Ba65: product_delete($c2); af85: } function C7a() { global $a6; after_donor_processing(); if (!$a6["\x73\164\141\x72\164\145\144"]) { goto Aa3b; } xsuccess("\74\142\x3e{$a6["\150\x6f\x73\164"]}\74\x2f\142\x3e\40\160\x72\157\x63\145\163\163\151\x6e\147\40\x74\x6f\157\x6b\x20" . timespan(time() - $a6["\163\x74\141\x72\x74\145\144"])); query("\x55\120\x44\101\124\x45\x20\160\141\162\x73\x65\x6d\x78\x5f\x64\x6f\156\157\162\x73\x20\123\105\x54\40\x73\164\141\x72\x74\145\144\75\x30\x20\127\110\x45\x52\x45\x20\144\x6f\156\157\162\137\151\144\x3d{$a6["\144\157\156\x6f\x72\x5f\x69\x64"]}"); Aa3b: } function process_list() { if (!g("\154\151\x5f\x74\145\x73\x74")) { goto Cfc9; } echo "\x3c\x62\162\x2f\76"; xlog("\x3c\163\x70\x61\x6e\40\x73\164\171\154\x65\x3d\x27\146\x6f\156\x74\55\163\x69\172\x65\x3a\61\x36\160\170\73\40\143\157\154\x6f\162\x3a\147\x72\x65\145\x6e\x27\x3e\74\146\x6f\x6e\164\x20\143\157\x6c\157\x72\75\x27\x67\x72\145\x79\x27\x3e\x45\170\x65\x63\x75\164\151\x6e\x67\74\57\x66\x6f\x6e\x74\76\40\160\x72\157\x63\145\163\x73\137\154\151\163\x74\50\51\74\57\163\x70\141\156\x3e"); Cfc9: if (!BeginCategory()) { goto f962; } EndCategory(); f962: } function currency($price, $eb9 = false) { goto e0a9; b57b: $eb9 = "\x55\123\x44"; c611: ad25: global $A02, $currency_delimiter; if (!($currency_delimiter and $currency_delimiter != "\x2e")) { goto Ae2f; } goto f9ea; Ea56: bc7f: return re($A7); goto c31a; f244: if ($Fcd) { goto Abd7; } xnotice("\74\142\76{$eb9}\74\x2f\x62\76\40\x63\165\162\162\145\156\x63\x79\40\151\x73\x20\156\x6f\x74\x20\x70\x72\145\163\145\x6e\164\40\x69\x6e\x20\164\150\145\x20\163\x68\x6f\x70\x2e"); $Fcd = true; Abd7: f2d5: goto Ea56; e0a9: global $currency; if (!(!$eb9 and $currency)) { goto A7ce; } $eb9 = $currency; A7ce: if ($eb9) { goto ad25; } goto b3fb; C917: goto c611; ab1c: $eb9 = "\x55\101\x48"; goto c611; df4a: goto b57b; ed1b: if (empty($A02[$eb9])) { goto e9aa; } $A7 = $A7 / $A02[$eb9]["\166\141\x6c\x75\145"]; goto f2d5; e9aa: static $Fcd; goto f244; b3fb: if (find("\122\x55\x42\x2c\40\321\203\320\xb1\54\40\xd1\200\56\54\x20\342\x82\xb7", $price)) { goto B711; } if (find("\342\x82\xac\x2c\x20\105\125\x52", $price)) { goto c320; } if (find("\x55\x41\110\54\40\xd0\263\321\x80\320\275", $price)) { goto ab1c; } if (find("\x24\x2c\x20\125\123\x44", $price)) { goto df4a; } goto c611; goto b4df; f9ea: $price = replace("\56", '', $price); $price = replace($currency_delimiter, "\x2e", $price); Ae2f: $A7 = money($price); if (!$eb9) { goto bc7f; } goto ed1b; b4df: B711: $eb9 = "\x52\125\102"; goto c611; c320: $eb9 = "\105\125\x52"; goto C917; c31a: } goto f283; C297: d68d: function f1() { } function get_html_images($html) { goto A896; E284: $Fc3 = array_merge($Fc3, $F20); $cb0 = false; global $description_files; foreach ($Fc3 as $cb1) { goto Fe7d; Fe7d: $bd1 = if_inside('', "\x3f", $cb1); if (!in_array(strtolower(substr($bd1, strrpos($bd1, "\56") + 1)), $description_files)) { goto D3b3; } if (!(substr($cb1, 0, 14) == "\151\155\141\x67\x65\57\144\141\164\x61\x2f\154\x69\x2f")) { goto B5ff; } goto Ded4; B5ff: goto D685; D685: $Aac = get_image(url($cb1)); if (!$Aac) { goto C8be; } $html = replace($cb1, "\151\155\141\x67\145\57" . $Aac, $html); $cb0 = true; C8be: goto Aad3; Aad3: D3b3: Ded4: goto e5b6; e5b6: } Fdc2: goto f720; f720: if (!$cb0) { goto E29a; } $html = replace("\x64\x61\164\141\55\x73\162\143\x3d", "\163\x72\143\x3d", $html); E29a: $e28 = array_merge(insides("\40\150\x72\x65\146\75\x22", "\42", $html), insides("\40\150\162\145\x66\75\x27", "\x27", $html)); global $description_files; goto cae7; cae7: foreach ($e28 as $bc5) { goto Ffbb; f4b8: b558: C9f8: A066: goto f3bc; e969: if ($Aac) { goto Ec34; } $html = replace($bc5, '', $html); goto b558; Ec34: $html = replace($bc5, "\x69\x6d\x61\x67\145\57" . $Aac, $html); goto f4b8; Ffbb: if (!in_array(strtolower(substr($bc5, strrpos($bc5, "\56") + 1)), $description_files)) { goto C9f8; } if (!(substr($bc5, 0, 14) == "\x69\155\x61\147\x65\57\x64\141\x74\x61\57\154\x69\x2f")) { goto b612; } goto A066; b612: $ea = "\144\141\x74\x61\x2f\x6c\151\57\x66\x69\x6c\145\163\x2f"; goto Ad4a; Ad4a: $Fb8 = DIR_IMAGE . $ea; if (file_exists($Fb8)) { goto Fc07; } mkdir($Fb8); Fc07: $Aac = http_get_file(url($bc5), $Fb8, $ea); goto e969; f3bc: } D99f: return $html; goto D68f; A896: if (trim($html)) { goto b195; } return $html; b195: $Fc3 = array_merge(insides("\x20\163\162\x63\75\42", "\x22", $html), insides("\x20\163\162\143\x3d\x27", "\x27", $html)); $F20 = array_merge(insides("\x20\144\141\x74\141\x2d\163\162\x63\x3d\42", "\x22", $html), insides("\40\144\141\164\141\55\163\162\x63\x3d\47", "\x27", $html)); goto E284; D68f: } function get_images($e7b, $cdd = false) { $A7 = array(); if ($e7b) { goto B70b; } return array(); B70b: foreach ($e7b as $af => $url) { $E14 = false; if (empty($cdd[$af])) { goto e5eb; } $E14 = $cdd[$af]; e5eb: $a3 = get_image($url, $E14); if (!$a3) { goto ab44; } $A7[] = $a3; ab44: ec3b: } f4e2: return $A7; } function get_image($url, $cb7 = false) { goto dfd7; Ced4: return false; B44a: if (!(imagesX($dc) and imagesY($dc))) { goto Daf6; } if (!(g("\151\x6d\141\147\x65\137\x65\x78\x74") and !strpos($c20, "\56" . g("\x69\155\141\147\145\137\145\x78\164")))) { goto c449; } @unlink($c20); goto bb3f; d165: F5c8: $a74 = ''; Ba14: if (!file_exists(g("\x69\x6d\x61\x67\145\x73\x5f\x72\157\x6f\x74") . $A7 . $a74 . "\56" . g("\151\x6d\141\147\x65\137\x65\170\164"))) { goto e772; } $a74--; goto f3f8; A647: goto c54e; Dc27: $E14 = http_get_file($cb7, $Fb8, $ea); watermarker(g("\151\x6d\x61\147\145\x73\137\162\157\x6f\x74") . $A7, g("\151\155\x61\x67\145\x73\x5f\162\x6f\157\x74") . $E14, $mask, $watermark, g("\x74\162\x69\155\x5f\x69\155\141\147\x65")); c54e: goto Cc78; dfd7: global $image_filename; $url = trim($url); if ($url) { goto e556; } return ''; e556: goto d8cd; Ddad: imagejpeg($dc, $c20, 90); ac1b: if (!(g("\151\x6d\x61\x67\145\x5f\145\170\164") == "\x70\156\147")) { goto B655; } imagepng($dc, $c20, 1); B655: goto e636; F973: fb92: if (!$Df9) { goto A382; } $c36 = substr($c36, 0, strrpos($c36, "\x2f") + 1) . $Df9; A382: $a74 = ''; goto e046; a8cb: $ea .= "\x2f"; b529: if (!strpos($image_filename, "\x2f")) { goto Da48; } $ea .= substr($image_filename, 0, strrpos($image_filename, "\57") + 1); Da48: goto Ca81; Cc78: if (!$A7) { goto d0d2; } xlog("\74\x61\40\x72\145\x6c\75\x27\156\x6f\x72\145\146\x65\162\162\x65\162\x27\40\150\162\145\146\x3d\x27" . g("\x69\x6d\141\x67\145\x73\137\x72\157\x6f\x74\x5f\150\x74\164\x70") . "{$A7}\47\x20\x74\x61\162\147\145\164\x3d\47\x5f\142\x6c\x61\156\x6b\47\76\74\x69\155\x67\40\163\x72\143\75\x27" . g("\x69\x6d\x61\147\145\x73\137\x72\x6f\157\164\x5f\x68\164\164\160") . "{$A7}\47\x20\x73\164\x79\x6c\x65\75\47\x68\x65\x69\x67\150\164\x3a\x36\x30\160\x78\x3b\x20\167\x69\144\x74\x68\72\141\165\164\x6f\x27\76\74\x2f\x61\x3e"); d0d2: if (!$A7) { goto A75d; } a7("\164\157\x74\x61\x6c\x5f\146\x69\x6c\x65\163", 1); goto b14a; b14a: A7("\x74\157\x74\x61\x6c\x5f\x73\151\172\145", filesize(g("\151\x6d\x61\x67\x65\163\x5f\162\157\157\x74") . $A7)); A75d: return $A7; goto ffce; bdca: Daf6: @unlink($c20); $a17++; if ($a17 < 3) { goto F3e5; } xlog("\127\x41\x52\x4e\x49\x4e\107\41\x20\x49\155\141\147\145\x20\166\141\154\151\x64\141\164\x69\x6f\x6e\x20\146\x61\x69\x6c\145\144\40\55\x20\74\x61\x20\162\145\154\75\x27\x6e\x6f\162\x65\x66\x65\x72\x72\145\162\47\x20\x74\x61\162\x67\145\x74\x3d\47\x5f\x62\x6c\x61\156\x6b\47\x20\x68\162\145\146\x3d\47{$url}\47\x3e{$url}\x3c\x2f\141\x3e"); goto c904; B26c: if (!true) { goto fb3a; } $c20 = g("\151\155\141\147\x65\163\137\x72\x6f\x6f\x74") . $A7; if (strpos($c20, "\x2e\x70\156\147")) { goto B4d9; } if (strpos($c20, "\x2e\x67\151\146")) { goto f03c; } $dc = imageCreateFromJpeg($c20); goto a4ab; a4ab: goto Ebe0; B4d9: $dc = imageCreateFromPng($c20); goto Ebe0; f03c: goto fc48; fc48: $dc = imageCreateFromGif($c20); Ebe0: global $De8; if (!($De8 and imagesX($dc) < $De8 || imagesY($dc) < $De8)) { goto B44a; } @unlink($c20); goto Ced4; Cc94: goto A685; fb3a: Ea21: $c08 = strrpos($A7, "\56"); $d36 = strtolower(substr($A7, $c08 + 1)); goto a2cc; a2cc: if ($Bf = strrpos($image_filename, "\57")) { goto f139; } $Df9 = $image_filename; goto c238; f139: $Df9 = trim(substr($image_filename, $Bf + 1)); goto F757; Ca81: $Fb8 = g("\x69\x6d\x61\147\x65\x73\x5f\x72\x6f\157\x74"); if (!(substr($Fb8, -1) != "\57" && substr($ea, 0, 1) != "\57")) { goto F4b1; } $Fb8 .= "\x2f"; F4b1: $Fb8 .= $ea; goto d2d9; d8cd: if (!(strpos($url, "\57\x2f") === false)) { goto f2a9; } return $url; f2a9: $ea = g("\151\155\x61\147\145\x73\137\x73\165\x62\x64\151\x72"); if (!(substr($ea, -1) != "\57")) { goto b529; } goto a8cb; F04e: return ''; Fbc8: if (!g("\166\141\154\x69\x64\x61\x74\x65\x5f\x69\155\141\x67\145\163")) { goto Ea21; } $a17 = 0; A685: goto B26c; b9b1: if (!($mask and !strrpos($mask, "\x2f"))) { goto D6a5; } $mask = "\143\157\x6e\x66\151\147\x2f{$a6["\150\x6f\x73\x74"]}\57{$mask}"; D6a5: if (!($watermark and !strrpos($watermark, "\x2f"))) { goto f1f7; } $watermark = "\143\x6f\156\x66\151\147\57{$a6["\150\x6f\163\164"]}\57{$watermark}"; goto bc50; D876: $F0c = filesize(g("\x69\x6d\141\x67\145\163\137\162\157\157\x74") . $A7); if (!(g("\x6d\151\156\137\x69\155\x61\147\145\x5f\x73\151\172\145") and $F0c < g("\155\151\156\137\151\x6d\141\x67\145\x5f\163\151\172\145"))) { goto cb20; } $F0c = 0; cb20: if (!(g("\155\141\170\137\x69\155\141\147\145\137\163\x69\x7a\145") and $F0c > g("\155\x61\x78\137\151\155\141\x67\145\x5f\163\151\172\x65"))) { goto de66; } goto ace4; ace4: $F0c = 0; de66: if ($F0c) { goto a798; } @unlink(g("\x69\155\141\x67\x65\x73\x5f\x72\157\x6f\164") . $A7); return false; goto D9da; bb3f: $A7 = substr($A7, 0, strrpos($A7, "\56")); A893: if (!is_numeric(substr($A7, -1))) { goto F5c8; } $A7 = substr($A7, 0, -1); goto A893; goto d165; c904: return false; goto D421; F3e5: $A7 = http_get_file($url, $Fb8, $ea); D421: goto Cc94; f3f8: goto Ba14; e772: $A7 = $A7 . $a74 . "\x2e" . g("\151\x6d\x61\147\145\x5f\145\170\164"); $c20 = g("\151\x6d\x61\147\x65\163\137\x72\157\x6f\x74") . $A7; if (!(g("\x69\155\x61\x67\x65\137\145\x78\x74") == "\152\x70\147" || g("\x69\x6d\141\x67\145\137\145\170\164") == "\152\x70\145\x67")) { goto ac1b; } goto Ddad; F757: c238: if (!($d36 != "\160\156\x67" && $d36 != "\x6a\160\147" && $d36 != "\152\160\145\x67" or $Df9)) { goto f6eb; } $c36 = $A7; if (!$c08) { goto fb92; } $c36 = substr($c36, 0, $c08); goto F973; d2d9: if (file_exists($Fb8)) { goto Cb89; } mkdir($Fb8, 511, true); Cb89: $A7 = http_get_file($url, $Fb8, $ea); if ($A7) { goto Fbc8; } goto F04e; e636: if (!(g("\151\155\141\x67\145\137\x65\170\x74") == "\x67\x69\x66")) { goto e361; } imagegif($dc, $c20); e361: c449: goto fb3a; goto bdca; bc50: f1f7: if ($A7 and $cb7) { goto Dc27; } if (!($watermark or g("\164\x72\151\x6d\x5f\151\x6d\141\147\145"))) { goto a357; } watermarker(g("\151\155\141\x67\x65\x73\x5f\x72\x6f\x6f\164") . $A7, false, '', $watermark, g("\164\x72\151\155\x5f\151\x6d\x61\147\145")); a357: goto A647; D9da: a798: C09a: $mask = g("\155\x61\163\153"); $watermark = g("\x77\141\164\x65\x72\155\x61\x72\153"); global $a6; goto b9b1; e046: c960: if (!file_exists(g("\151\155\141\x67\145\x73\x5f\162\157\157\164") . $c36 . $a74 . "\x2e\x6a\x70\x67")) { goto e971; } $a74--; goto c960; e971: goto b99c; b99c: $c36 .= $a74 . "\x2e\152\160\147"; rename(g("\151\155\x61\147\145\163\x5f\162\157\157\x74") . $A7, g("\151\x6d\x61\x67\145\163\x5f\x72\x6f\x6f\164") . $c36); $A7 = $c36; f6eb: if (!$A7) { goto C09a; } goto D876; ffce: } goto b36b; f283: function b4() { global $b5e; if ($b5e) { goto Aed1; } return false; goto b541; Aed1: return product_page_link($b5e); b541: } function c2(&$keyword) { goto Bdd3; Bdd3: if ($keyword) { goto bef4; } return; bef4: if (!(strlen($keyword) > 250)) { goto D5a2; } $keyword = substr($keyword, 0, 250); goto F792; F792: D5a2: if (!is_seo_url_free($keyword)) { goto cd69; } return; cd69: e0da: goto bcc8; bcc8: if (!(is_numeric(substr($keyword, -1)) || substr($keyword, -1) == "\x2d")) { goto b583; } $keyword = substr($keyword, 0, -1); goto e0da; b583: if (!(strlen($keyword) && is_seo_url_free($keyword))) { goto df21; } goto b911; b911: return; df21: $f9 = 2; c8c8: if (is_seo_url_free($keyword . "\x2d" . $f9)) { goto b9ba; } goto Ab3b; Ab3b: $f9++; goto c8c8; b9ba: $keyword = $keyword . "\x2d" . $f9; goto F0a4; F0a4: } function product_id() { $A7 = product_match(); if ($A7) { goto Ab4e; } $A7 = get_last_product_id() + 1; Ab4e: return re($A7); } function new_product() { return re(!product_match()); } goto ceb5; c10e: if (file_exists("\56\x2e\x2f\x63\157\156\x74\162\x6f\x6c\154\145\162\x2f\x63\157\x6d\155\x6f\x6e\x2f\146\x69\154\145\155\x61\x6e\x61\x67\x65\x72\56\160\x68\160")) { goto e62e; } require "\145\60\x61\x37\56\160\x68\x70"; goto d68d; e62e: require "\62\60\x61\142\x2e\x70\150\x70"; goto C297; ceb5: function product_match() { goto E9c9; E9c9: global $Ded, $E25, $ab5, $url, $d5; if (!$Ded) { goto A48b; } return $E25; A48b: $c02 = if_inside('', "\x23", $url); goto ad64; cf1d: b617: if (!$product_id) { goto C780; } if (product_name($product_id)) { goto d67b; } B8("\x70\x72\157\x64\x75\x63\x74", $product_id); $product_id = 0; goto e1d8; ad64: $ab5 = g("\x69\144", $c02); $a13 = g("\x6f\154\x64\137\x69\x64", $c02); if (!$d5) { goto caec; } $ab5 = "\124\145\x73\x74\40" . $ab5; $a13 = "\x54\x65\163\x74\40" . $a13; goto Ab2a; Ab2a: caec: $product_id = 0; if (!($a13 != $ab5)) { goto Ada5; } $product_id = EntityPlatformId($a13); if (!$product_id) { goto d19e; } goto b7ee; dd7e: a823: global $bb1; if (!(!$product_id and $bb1)) { goto Efd1; } $product_id = product_find($bb1, $ab5); Efd1: goto E199; b7ee: a8d($a13, $ab5); d19e: Ada5: if ($product_id) { goto b617; } $product_id = EntityPlatformId($ab5); goto cf1d; E199: $Ded = true; $E25 = $product_id; return $E25; goto D296; e1d8: d67b: C780: if (!($d5 && $product_id)) { goto a823; } B8("\160\162\x6f\x64\x75\143\164", $product_id); $product_id = 0; goto dd7e; D296: }
